import{_ as p,a as l,l as r,c as d,b as s,t as m,w as h,g as u,j as f,v as b,k as g,o as n,p as x,m as v}from"./index-471c8892.js";import"./FileSaver.min-6aa75898.js";const _={data(){return{title:"",text:"",checked:!1}},methods:{get(t){this.title="",this.text="",this.$root.loading=!0,l.post("/paste/get",r.stringify({id:t})).then(e=>{e.success?(this.title=e.detail.title,this.text=e.detail.text):this.$router.push("/pastes")}).catch(e=>{this.$root.showModal("错误",e.message),this.$router.push("/pastes")}).finally(()=>{this.$root.loading=!1})},update(){if(this.text.trim().length===0){this.$root.showModal("提示","正文不能为空");return}this.$root.hasToken(()=>this.update())&&(this.$root.loading=!0,l.post("/paste/update",r.stringify({id:this.$route.params.id,text:this.text})).then(t=>{t.success?this.$root.showModal("成功","修改成功"):this.$root.showModal("失败",t.msg)}).catch(t=>{this.$root.showModal("错误",t.message)}).finally(()=>{this.$root.loading=!1}))},remove(){this.$root.hasToken(()=>this.remove())&&(this.$root.loading=!0,l.post("/paste/delete",r.stringify({id:this.$route.params.id})).then(t=>{t.success?(this.$root.showModal("成功","删除成功"),this.$router.push("/pastes")):this.$root.showModal("失败",t.msg)}).catch(t=>{this.$root.showModal("错误",t.message)}).finally(()=>{this.$root.loading=!1}))},download(){var t=new Blob([this.text],{type:"text/plain;charset=utf-8"});saveAs(t,this.$route.params.id+".txt")}},created(){this.$route.params.id&&this.get(this.$route.params.id)}},k=t=>(x("data-v-86ce8d53"),t=t(),v(),t),y={class:"card"},$={class:"card-body border-bottom",style:{padding:"0.781rem 1rem"}},w={class:"d-flex justify-content-between flex-wrap align-items-center"},M={class:"paste-title text-muted text-truncate mw-50"},C={class:"form-check form-switch d-inline-block align-middle me-2",style:{padding:"0.25rem 0.5rem","font-size":"0.875rem"}},B=k(()=>s("label",{class:"form-check-label",for:"highlight",style:{"user-select":"none"}},"代码高亮",-1)),j=["data-clipboard-text"],I=["disabled"];function S(t,e,T,V,o,a){const c=g("highlightjs");return n(),d("div",y,[s("div",$,[s("div",w,[s("a",{class:"link-primary",onClick:e[0]||(e[0]=i=>t.$router.push("/pastes"))},"返回"),s("div",M,m(o.title),1),s("div",null,[s("form",C,[h(s("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"highlight","onUpdate:modelValue":e[1]||(e[1]=i=>o.checked=i)},null,512),[[u,o.checked]]),B]),s("a",{class:"btn btn-outline-primary btn-sm",id:"btnCopy","data-clipboard-text":o.text},"复制",8,j),s("a",{class:"btn btn-outline-primary btn-sm ms-1",onClick:e[2]||(e[2]=i=>a.download())},"下载"),s("button",{disabled:o.checked,class:"btn btn-outline-primary btn-sm ms-1",onClick:e[3]||(e[3]=i=>a.update())},"提交修改",8,I),s("a",{class:"btn btn-outline-danger btn-sm ms-1",onClick:e[4]||(e[4]=i=>t.$root.showConfirm(()=>a.remove()))},"删除")])])]),o.checked?(n(),f(c,{key:0,autodetect:"",code:o.text,class:"mb-0 min-vh-75"},null,8,["code"])):h((n(),d("textarea",{key:1,id:"textarea",class:"form-control border-0 min-vh-75","onUpdate:modelValue":e[5]||(e[5]=i=>o.text=i)},null,512)),[[b,o.text]])])}const U=p(_,[["render",S],["__scopeId","data-v-86ce8d53"]]);export{U as default};
