import{_ as n,a as r,l,o as d,c as h,b as e,t as p,w as u,v as m}from"./index-02704be0.js";import"./FileSaver.min-ee6c9774.js";const c={data(){return{title:"",text:""}},methods:{get(t){this.title="",this.text="",this.$root.loading=!0,r.post("/paste/get",l.stringify({id:t})).then(s=>{s.success?(this.title=s.detail.title,this.text=s.detail.text):this.$router.push("/pastes")}).catch(s=>{this.$root.showModal("错误",s.message),this.$router.push("/pastes")}).finally(()=>{this.$root.loading=!1})},update(){if(this.text.trim().length===0){this.$root.showModal("提示","正文不能为空");return}this.$root.hasToken(()=>this.update())&&(this.$root.loading=!0,r.post("/paste/update",l.stringify({id:this.$route.params.id,text:this.text})).then(t=>{t.success?this.$root.showModal("成功","修改成功"):this.$root.showModal("失败",t.msg)}).catch(t=>{this.$root.showModal("错误",t.message)}).finally(()=>{this.$root.loading=!1}))},remove(){this.$root.hasToken(()=>this.remove())&&(this.$root.loading=!0,r.post("/paste/delete",l.stringify({id:this.$route.params.id})).then(t=>{t.success?(this.$root.showModal("成功","删除成功"),this.$router.push("/pastes")):this.$root.showModal("失败",t.msg)}).catch(t=>{this.$root.showModal("错误",t.message)}).finally(()=>{this.$root.loading=!1}))},download(){var t=new Blob([this.text],{type:"text/plain;charset=utf-8"});saveAs(t,this.$route.params.id+".txt")}},created(){this.$route.params.id&&this.get(this.$route.params.id)}},f={class:"card"},$={class:"card-body border-bottom",style:{padding:"0.781rem 1rem"}},b={class:"d-flex justify-content-between flex-wrap align-items-center"},g={class:"paste-title text-muted text-truncate mw-50"},x=e("a",{class:"btn btn-outline-primary btn-sm",id:"btnCopy","data-clipboard-target":"#textarea"},"复制",-1);function v(t,s,w,y,i,a){return d(),h("div",f,[e("div",$,[e("div",b,[e("a",{class:"link-primary",onClick:s[0]||(s[0]=o=>t.$router.push("/pastes"))},"返回"),e("div",g,p(i.title),1),e("div",null,[x,e("a",{class:"btn btn-outline-primary btn-sm ms-1",onClick:s[1]||(s[1]=o=>a.download())},"下载"),e("a",{class:"btn btn-outline-primary btn-sm ms-1",onClick:s[2]||(s[2]=o=>a.update())},"提交修改"),e("a",{class:"btn btn-outline-danger btn-sm ms-1",onClick:s[3]||(s[3]=o=>t.$root.showConfirm(()=>a.remove()))},"删除")])])]),u(e("textarea",{id:"textarea",class:"form-control border-0 min-vh-75","onUpdate:modelValue":s[4]||(s[4]=o=>i.text=o)},null,512),[[m,i.text]])])}const _=n(c,[["render",v]]);export{_ as default};
