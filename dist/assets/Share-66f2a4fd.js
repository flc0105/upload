import{_ as d,a as n,l as h,o as e,c as a,b as t,F as _,r as u,t as r,d as m}from"./index-02704be0.js";import"./bootstrap.bundle-5f8ed693.js";const p={data(){return{codes:{}}},methods:{list(){this.$root.loading=!0,n.post("/shareCode/list").then(s=>{s.success?this.codes=s.detail:this.$root.showModal("失败",s.msg)}).catch(s=>{this.$root.showModal("错误",s.message)}).finally(()=>{this.$root.loading=!1})},remove(s){this.$root.hasToken(()=>this.remove(s))&&(this.$root.loading=!0,n.post("/shareCode/delete",h.stringify({code:s})).then(i=>{i.success?(this.list(),this.$root.showModal("成功","删除成功")):this.$root.showModal("失败",i.msg)}).catch(i=>{this.$root.showModal("错误",i.message)}).finally(()=>{this.$root.loading=!1}))},getLink(s){return window.location.protocol+"//"+window.location.host+"/file/"+s}},created(){this.list()}},g={class:"table"},f=t("tr",null,[t("th",null,"分享码"),t("th",null,"文件路径"),t("th",{class:"status"},"状态"),t("th",null,"操作")],-1),b={style:{width:"10%","min-width":"80px"}},k={class:"text-truncate filename"},$={class:"status"},w={key:0,class:"badge text-bg-success"},y={key:1,class:"badge text-bg-danger"},x=["data-clipboard-text"],C=t("i",{class:"bi bi-clipboard"},null,-1),v=[C],M=["onClick"],B=t("i",{class:"bi bi-trash"},null,-1),L=[B];function F(s,i,N,S,c,l){return e(),a("table",g,[t("tbody",null,[f,(e(!0),a(_,null,u(c.codes,o=>(e(),a("tr",{key:o},[t("td",b,[t("i",null,r(o.code),1)]),t("td",k,[t("i",null,r(o.path),1)]),t("td",$,[o.valid?(e(),a("span",w,"有效")):(e(),a("span",y,"无效"))]),t("td",null,[o.valid?(e(),a("a",{key:0,class:"link-primary me-1",id:"btnCopy","data-clipboard-text":l.getLink(o.code)},v,8,x)):m("",!0),t("a",{class:"link-danger",onClick:V=>s.$root.showConfirm(function(){l.remove(o.code)})},L,8,M)])]))),128))])])}const T=d(p,[["render",F]]);export{T as default};
